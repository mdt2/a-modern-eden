'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _data = require('./data');

var parseData = _interopRequireDefault(_data).default;

var _pages = require('./pages');

var parsePages = _interopRequireDefault(_pages).default;

var _patterns = require('./patterns');

var parsePatterns = _interopRequireDefault(_patterns).default;

var _templates = require('./templates');

var parseTemplates = _interopRequireDefault(_templates).default;

var _tree = require('./tree');

var parseTree = _interopRequireDefault(_tree).default;

var _error = require('../utils/error');

var DrizzleError = _interopRequireDefault(_error).default;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Parse files with data from src and build a drizzleData object
 * @param {Object} options
 * @return {Promise} resolving to Drizzle data object
 */
/**
 * @module parse
 */
function parseAll(options) {
  return Promise.all([parseData(options), parsePages(options), parsePatterns(options), parseTemplates(options)]).then(function (allData) {
    return parseTree(allData, options);
  }, function (error) {
    return DrizzleError.error(error, options.debug);
  });
}

exports.default = parseAll;
module.exports = exports['default'];